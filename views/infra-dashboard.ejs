<%- include('partials/header', { active: 'infra-rooms' }) %>

<!-- Right Sidebar for School Filter -->
<aside id="sidebar" class="infra-sidebar">
  <div class="infra-sidebar-header">
    <h3>Filter by School</h3>
    <button class="sidebar-toggle-close" data-sidebar-toggle>
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>
  <div class="school-chips">
    <button class="school-chip palette-selected" data-school="all">
      <span class="chip-dot" style="background:#94a3b8;"></span> All Schools
    </button>
    <button class="school-chip" data-school="default">
      <span class="chip-dot" style="background:#342b7c;"></span> Elective
    </button>
    <button class="school-chip" data-school="7">
      <span class="chip-dot" style="background:#e12a7b;"></span> ATLAS ISDI
    </button>
    <button class="school-chip" data-school="8">
      <span class="chip-dot" style="background:#009fe0;"></span> ATLAS ISME
    </button>
    <button class="school-chip" data-school="11">
      <span class="chip-dot" style="background:#ed1a3b;"></span> ATLAS INSOFE / UGDX
    </button>
    <button class="school-chip" data-school="16">
      <span class="chip-dot" style="background:#CC5500;"></span> ATLAS LAW
    </button>
  </div>

  <div class="infra-sidebar-actions">
    <a href="#" id="exportNavBtn" class="sidebar-action-link">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
      Export CSV
    </a>
  </div>
</aside>

<div class="p-[32px]">

      <!-- Filters Bar (dashboard-style) -->
      <div class="flex flex-wrap items-end
            gap-[4px]
            py-[8px] px-[16px]
            bg-[#ffffff]
            border border-[#e2e8f0]
            rounded-[12px]
            mb-[16px]">

        <!-- DATE -->
        <div class="min-w-[100px] flex flex-col gap-[2px] shrink basis-auto grow-0" id="filterDate"></div>

        <!-- BUILDING -->
        <div class="min-w-[100px] flex flex-col gap-[2px] shrink basis-auto grow-0" id="filterBuilding"></div>

        <!-- FLOOR -->
        <div class="min-w-[100px] flex flex-col gap-[2px] shrink basis-auto grow-0" id="filterFloor"></div>

        <!-- CLASS -->
        <div class="min-w-[100px] flex flex-col gap-[2px] shrink basis-auto grow-0" id="filterClass"></div>

        <!-- CATEGORY -->
        <div class="min-w-[100px] flex flex-col gap-[2px] shrink basis-auto grow-0" id="filterCategory"></div>

        <!-- Show Available toggle -->
        <label class="flex items-center gap-[6px] text-[0.8rem] font-[500] text-[#64748b] cursor-pointer px-[8px] py-[6px] h-fit whitespace-nowrap">
          <input type="checkbox" id="showAvailable" checked class="w-[16px] h-[16px] accent-[#10b981] cursor-pointer"> Available
        </label>

        <!-- Show Occupied toggle -->
        <label class="flex items-center gap-[6px] text-[0.8rem] font-[500] text-[#64748b] cursor-pointer px-[8px] py-[6px] h-fit whitespace-nowrap">
          <input type="checkbox" id="showOccupied" checked class="w-[16px] h-[16px] accent-[#10b981] cursor-pointer"> Occupied
        </label>

        <!-- Schools button -->
        <button id="sidebarToggle" class="bg-slate-100 text-slate-800 border border-slate-200 inline-flex items-center gap-2 px-4 py-2 rounded-lg
text-[0.85rem] font-medium cursor-pointer
transition-all duration-[150ms] ease-in-out h-fit whitespace-nowrap">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
            <line x1="4" y1="21" x2="4" y2="14"></line>
            <line x1="4" y1="10" x2="4" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12" y2="3"></line>
            <line x1="20" y1="21" x2="20" y2="16"></line>
            <line x1="20" y1="12" x2="20" y2="3"></line>
          </svg>
          Schools
        </button>

        <!-- Clear button -->
        <button class="bg-slate-100 text-slate-800 border border-slate-200 inline-flex items-center gap-2 px-4 py-2 rounded-lg
text-[0.85rem] font-medium cursor-pointer
transition-all duration-[150ms] ease-in-out h-fit whitespace-nowrap" id="clearFiltersBtn">Clear</button>

      </div>

      <!-- Timetable Version Bar -->
      <div class="flex bg-[#1e293b] rounded-[12px] px-[24px] py-[16px] mb-[24px] gap-[32px]">
        <div class="flex flex-col gap-[2px]">
          <span class="text-[0.7rem] text-[#94a3b8] uppercase tracking-[0.05em]">TIMETABLE VERSION</span>
          <span class="text-[1rem] font-[600] text-white">1</span>
        </div>
        <div class="flex flex-col gap-[2px]">
          <span class="text-[0.7rem] text-[#94a3b8] uppercase tracking-[0.05em]">STATUS</span>
          <span class="inline-block bg-[rgba(16,185,129,0.2)] text-[#34d399] px-[10px] py-[2px] rounded-[4px] text-[0.75rem] font-[600]">GENERATED</span>
        </div>
        <div class="flex flex-col gap-[2px]">
          <span class="text-[0.7rem] text-[#94a3b8] uppercase tracking-[0.05em]">TOTAL ROOMS</span>
          <span class="text-[1rem] font-[600] text-white" id="totalRooms">0</span>
        </div>
        <div class="flex flex-col gap-[2px]">
          <span class="text-[0.7rem] text-[#94a3b8] uppercase tracking-[0.05em]">OCCUPIED</span>
          <span class="text-[1rem] font-[600] text-[#ef4444]" id="occupiedRooms">0</span>
        </div>
        <div class="flex flex-col gap-[2px]">
          <span class="text-[0.7rem] text-[#94a3b8] uppercase tracking-[0.05em]">AVAILABLE</span>
          <span class="text-[1rem] font-[600] text-[#34d399]" id="availableRooms">0</span>
        </div>
        <div class="flex flex-col gap-[2px]">
          <span class="text-[0.7rem] text-[#94a3b8] uppercase tracking-[0.05em]">OCCUPANCY RATE</span>
          <span class="text-[1rem] font-[600] text-[#3b82f6]" id="occupancyRate">0%</span>
        </div>
      </div>

      <!-- Gantt Chart -->
      <div id="ganttChart" class="gantt-container">
        <!-- Gantt chart will be rendered here -->
      </div>

      <div id="loading" class="loading-state" style="display: none;">
        <div class="spinner"></div>
        <p>Loading room data...</p>
      </div>

      <div id="noData" class="empty-state" style="display: none;">
        <div class="empty-icon">ðŸ“Š</div>
        <h3>No rooms found</h3>
        <p>Try adjusting your filters to see more results</p>
      </div>

    </div>
  </div>
</div>

<script src="/js/infra-dashboard.js"></script>
</body>
</html>
